<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.happyjob.study.community.dao.ChatDao">

    <insert id="save">
        <selectKey resultType="int" keyProperty="chatNo" order="BEFORE">
            select ifnull(max(chat_no), 0) + 1 from tb_chat
        </selectKey>

        INSERT INTO tb_chat (
            chat_no,
            loginId,
            chat_content,
            reg_date,
            chatroom_no
        ) VALUES (
            #{chatNo},
            #{name},
            #{msg},
            #{regDate},
            1    
        );
    </insert>

</mapper>

